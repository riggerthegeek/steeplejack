<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Config - Steeplejack documentation</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Config";
    var mkdocs_page_input_path = "getting-started/config.md";
    var mkdocs_page_url = "/getting-started/config/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68581184-2', 'steeplejack.info');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Steeplejack documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Getting started</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../your-first-app/">Your first app</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../routing/">Routing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../modules/">Modules</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Config</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#config">Config</a></li>
                
            
                <li class="toctree-l3"><a href="#environment-variables">Environment Variables</a></li>
                
                    <li><a class="toctree-l4" href="#srcappjs">/src/app.js</a></li>
                
                    <li><a class="toctree-l4" href="#srcenvvarsjson">/src/envvars.json</a></li>
                
            
                <li class="toctree-l3"><a href="#command-line-arguments">Command Line Arguments</a></li>
                
            
                <li class="toctree-l3"><a href="#order-of-precedence">Order of precedence</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../testing/">Testing</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Dependency injection</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dependency-injection/intro/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dependency-injection/class-injector/">Class injector</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dependency-injection/factory-injector/">Factory injector</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dependency-injection/singleton-injector/">Singleton injector</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../dependency-injection/config-injector/">Config injector</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Data models</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../data-models/intro/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../data-models/model/">Model</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../data-models/collection/">Collection</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Plugins</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/intro/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/http-strategies/">HTTP Strategies</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Strategies</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../strategies/intro/">Introduction</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>API Reference</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/steeplejack/">Steeplejack</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>/decorators</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/decorators/inject/">inject</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>/exception</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/exception/exception/">exception</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/exception/fatal/">fatal</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/exception/validation/">validation</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>/lib</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/lib/base/">base</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/lib/collection/">collection</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/lib/injector/">injector</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/lib/logger/">logger</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/lib/model/">model</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/lib/plugin/">plugin</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/lib/router/">router</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/lib/server/">server</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/lib/socket/">socket</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/lib/socketRequest/">socketRequest</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/lib/view/">view</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Steeplejack documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Getting started &raquo;</li>
        
      
    
    <li>Config</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/riggerthegeek/steeplejack" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="config">Config</h1>
<blockquote>
<p>A litmus test for whether an app has all config correctly factored out of the code is whether the codebase could be
made open source at any moment, without compromising any credentials.</p>
<p><a href="http://12factor.net/config">Twelve Factor App: Config</a></p>
</blockquote>
<p>The config is designed as a single source of truth. A good <a href="http://12factor.net/config">Twelve Factor App</a> allows you to override
your configuration with environment variables. The same is true of a Steeplejack application. There are two ways of overriding
your config - environment variables and command line arguments.</p>
<p>Any overridden config is typecast into an appropriate data type.</p>
<h1 id="environment-variables">Environment Variables</h1>
<p>To use environment variables, you need to add an <code>env</code> to your initial factory.</p>
<h2 id="srcappjs">/src/app.js</h2>
<pre><code class="javascript">let app = Steeplejack.app({
    config: require(&quot;./config.json&quot;),
    env: require(&quot;./envvars.json&quot;),
    modules: [
        &quot;src/!(routes)/**/*.js&quot;
    ],
    routesDir: &quot;src/routes&quot;
});
</code></pre>

<h2 id="srcenvvarsjson">/src/envvars.json</h2>
<pre><code class="json">{
  &quot;server&quot;: {
    &quot;name&quot;: &quot;APP_SERVER_NAME&quot;,
    &quot;port&quot;: &quot;APP_SERVER_PORT&quot;
  }
}
</code></pre>

<p>Notice how the <code>envvars.json</code> file is the same structure as the <code>config.json</code>.  The value in the object is the name of the
environment variable.</p>
<pre><code>APP_SERVER_PORT=8080 babel-node src/app
</code></pre>
<p>Now you'll be able view the application on <a href="http://localhost:8080">http://localhost:8080</a></p>
<h1 id="command-line-arguments">Command Line Arguments</h1>
<p>The command line arguments require no set up.  By using dot notation, you can put anything you want in:</p>
<pre><code>babel-node src/app server.port=7777 hello.world=foobar dev production=false
</code></pre>
<p>This will make the config object look like this</p>
<pre><code class="json">{
    &quot;server&quot;: {
        &quot;name&quot;: &quot;steeplejack-example&quot;,
        &quot;port&quot;: 7777
    },
    &quot;hello&quot;: {
        &quot;world&quot;: &quot;foobar&quot;
    },
    &quot;dev&quot;: true,
    &quot;production&quot;: false
}
</code></pre>

<p>Notice how <code>hello.world=foobar</code> created an object. If it receives no value, like <code>dev</code>, it will default to <code>true</code>.</p>
<h1 id="order-of-precedence">Order of precedence</h1>
<p>If you have both an environment variable and a command line argument for the same config item, the application will use the command
line argument.</p>
<pre><code>APP_SERVER_PORT=8080 babel-node src/app server.port=7777
</code></pre>
<p>The server will be run on port 7777</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../testing/" class="btn btn-neutral float-right" title="Testing">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../modules/" class="btn btn-neutral" title="Modules"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Simon Emms</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/riggerthegeek/steeplejack" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../modules/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../testing/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
