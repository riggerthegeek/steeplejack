# Routing

Now you've got the server running, you need to add some HTTP routes to deal with traffic. The routing is file-based routing. This
means that the URL is generated from the location of the file in the routing directory. For example, to create an endpoint at
`/hello/world`, you would create a folder called `/hello` and, in it, a file called `world.js`.

> There are actually a few ways you could create this. You could create a file called `hello.js` and an endpoint `/world` in the file
> or directories `/hello/world` and a file called `index.js`. You should nest your routing files so they make the most sense to you.

## /src/routes/hello/world.js

```javascript
export let route = ($output) => {
    return {
        "/": {
            get: [
                (req, res) => {

                    $output(req, res, () => {

                        return {
                            hello: "world"
                        };

                    });

                }
            ]
        }
    };
};
```

Right, there's a lot going on here which we need to understand. To specify an HTTP route, the file should export a function on
`exports.route`. This function returns an object of all the endpoints, in this case an HTTP GET on `/`.

Once we are at the HTTP verb, this is just the [Restify routing](http://restify.com/#routing). You can pass in either a function or
an array of functions with the arguments `request`, `response` and an optional callback.

### But what is this `$output`? And how does it get here?

The `$output` is a method generated by the `steeplejack-restify` package to give a single, consistent way of outputting. The function it
receives is actually wrapped by `Promise.resolve` - if it would resolve a promise, it is treated as a success and any rejected promise
comes back as an error.

It comes in from the dependency injector which we will cover shortly. When configuring a module, you give it a name which you can use
throughout your application. The function assigned to `exports.route` gets processed by the dependency injector, automatically resolving
the dependency.

**[PREVIOUS - Your First App](your-first-app.md)**

**[NEXT - Modules](modules.md)**
